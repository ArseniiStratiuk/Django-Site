{% load static %}
<!DOCTYPE HTML>
<html>
    <head>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    </head>
    <body>

      <script>
        document.addEventListener('DOMContentLoaded', function() {
        var elems = document.querySelectorAll('.dropdown-trigger');
        var instances = M.Dropdown.init(elems);
      });
      </script>
      
      <div class="navbar-fixed">
        <nav>
          <div class="nav-wrapper teal lighten-2 z-depth-1">
            <div class="container">
              <a href="/" class="brand-logo">Головна</a>
              <ul id="nav-mobile" class="right hide-on-med-and-down">
                <li>
                  <form method=POST action="{% url 'search' %}" id="search_nav">
                    {% csrf_token %}
                    <input type="search" name="searchpost" placeholder="Назва статті...">
                  </form>
                </li>
                <li><button class="waves-effect btn-floating waves-light btn-small" form="search_nav" type="submit">
                  <i class="material-icons">search</i>
                </button></li>
                <li><a href="/admin">Admin</a></li>
                {% if not user.is_authenticated %}
                  <li><a href="/login">Увійти</a></li>
                  <li><a href="/register">Зареєструватися</a></li>
                {% else %}
                  <li><a href="{% url 'saved_posts' %}">Збережене</a></li>
                  <li><a href="/profile">Мій Профіль</a></li>
                  <li><a href="/chat">Чат</a></li>
                  <li><a href="/logout">Вийти</a></li>
                {% endif %}
              </ul>

              <a href="#" class="dropdown-trigger btn show-on-med-and-down hide-on-med-and-up left" 
                data-target="dropMenu">Menu</a>
              <ul id="dropMenu" class="dropdown-content">
                {% if not user.is_authenticated %}
                  <li><a href="/login">Увійти</a></li>
                  <li><a href="/register">Зареєструватися</a></li>
                {% else %}
                  <li><a href="{% url 'saved_posts' %}">Збережене</a></li>
                  <li><a href="/profile">Мій Профіль</a></li>
                  <li><a href="/chat">Чат</a></li>
                  <li><a href="/logout">Вийти</a></li>
                {% endif %}
              </ul>

            </div>
          </div>
        </nav>
      </div>
      <br>
      {% block content %}
      {% endblock %}

      {% block footer %}
      {% endblock%}

      {% if messages %}
        <script>
          M.AutoInit();
          {% for msg in messages %}
            {% if msg.tags == 'error' %}
              M.toast({html: "{{msg}}", classes: "orange"});
            {% elif msg.tags == 'success' %}
              M.toast({html: "{{msg}}", classes: "green"});
            {% elif msg.tags == 'info' %}
              M.toast({html: "{{msg}}", classes: "blue"});
            {% endif %}
          {% endfor %}
        </script>
      {% endif %}
    </body>
</html>